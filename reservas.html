<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Reservas | Ful√¥ de Pequi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}

/* ===== FUNDO AMARELO (como seu anexo) ===== */
body{ background:#f3e2be; }

/* ===== TOPO (N√ÉO MEXI NA ESTRUTURA) ===== */
.topo{
  height:90px;
  background:#2f3b2a;
  display:grid;
  grid-template-columns:auto 1fr;
  align-items:center;
  padding:0 40px;
}
.logo img{height:70px;display:block;}
.menu{
  list-style:none;
  display:flex;
  justify-content:center;
  gap:50px;
  margin:0;
  padding:0;
}
.menu li{position:relative;}
.menu a{
  color:#fff;
  text-decoration:none;
  text-transform:uppercase;
  font-size:13px;
  font-weight:500;
  letter-spacing:1px;
  padding:10px 0;
}
.menu li::before{
  content:"";
  position:absolute;
  top:-12px;
  left:50%;
  width:32px;
  height:1px;
  background:rgba(255,255,255,0.5);
  transform:translateX(-50%);
}

/* ===== √ÅREA ===== */
.reserva{
  max-width:1100px;
  margin:100px auto;
  padding:0 20px;
}
.reserva h1{
  text-align:center;
  font-size:36px;
  color:#2f3b2a;
  margin-bottom:40px;
}

/* ===== CARD ===== */
.card{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:40px;
  background:#f7f7f5;
  padding:40px;
  border-radius:6px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
}
.galeria-reserva{
  display:flex;
  flex-direction:column;
  gap:16px;
}
.galeria-principal{
  width:100%;
  height:100%;
  max-height:420px;
  object-fit:cover;
  border-radius:6px;
}
.miniaturas{
  display:flex;
  gap:12px;
  overflow-x:auto;
  padding-bottom:6px;
  scrollbar-width:none;
}
.miniaturas::-webkit-scrollbar{display:none;}
.miniatura{
  border:0;
  padding:0;
  background:none;
  cursor:pointer;
  flex:0 0 auto;
  border-radius:4px;
}
.miniatura img{
  width:90px;
  height:70px;
  object-fit:cover;
  border-radius:4px;
  border:2px solid transparent;
  display:block;
}
.miniatura.ativa img{
  border-color:#2f3b2a;
}

/* ===== COLUNA DIREITA ===== */
.form h2{
  font-size:28px;
  margin-bottom:10px;
  color:#2f3b2a;
}
.descricao{
  font-size:15px;
  color:#555;
  line-height:1.7;
  margin:10px 0 18px;
}

/* Chips estilo Airbnb */
.chips{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin:12px 0 14px;
}
.chip{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  background:#fff;
  border:1px solid rgba(0,0,0,0.12);
  border-radius:999px;
  font-size:13px;
  color:#333;
  white-space:nowrap;
}

/* Regras (desconto + fim de semana) */
.regras-reserva{
  margin:14px 0 18px;
  padding:14px 16px;
  background:#fff;
  border:1px solid rgba(0,0,0,0.15);
  font-size:14px;
  color:#444;
  line-height:1.6;
  border-radius:6px;
}
.regras-reserva ul{ margin:8px 0 6px 18px; }
.regras-reserva li{ margin-bottom:4px; }
.regras-reserva strong{ color:#2f3b2a; }
.regras-reserva small{
  display:block;
  margin-top:8px;
  color:#666;
}

/* Form */
.form label{
  display:block;
  margin-top:14px;
  font-size:14px;
  color:#2f3b2a;
}
.form input, .form select{
  width:100%;
  padding:12px;
  margin-top:6px;
  font-size:15px;
  border:1px solid rgba(0,0,0,0.2);
  border-radius:6px;
  background:#fff;
}
.form button{
  width:100%;
  margin-top:18px;
  padding:14px;
  background:#2f3b2a;
  color:#fff;
  border:none;
  font-size:15px;
  letter-spacing:1px;
  cursor:pointer;
  text-transform:uppercase;
  border-radius:6px;
}

/* Resumo total */
.info{
  margin-top:16px;
  font-size:14px;
  color:#555;
  line-height:1.6;
}
#totalBox{
  margin-top:10px;
  padding:12px;
  background:#fff;
  border:1px solid rgba(0,0,0,0.15);
  border-radius:6px;
}

/* Responsivo */
@media(max-width:900px){
  .card{ grid-template-columns:1fr; }
  .menu{display:none;}
  .galeria-principal{max-height:360px;}
  .miniatura img{width:80px;height:60px;}
}
</style>
</head>

<body>

<header>
  <!-- TOPO: mantido igual -->
  <nav class="topo">
    <div class="logo">
      <a href="index.html">
        <img src="assets/logo.png" alt="Ful√¥ de Pequi">
      </a>
    </div>
    <ul class="menu">
      <li><a href="index.html">IN√çCIO</a></li>
      <li><a href="reservas.html">ACOMODA√á√ïES</a></li>
      <li><a href="servicos.html">SERVI√áOS</a></li>
      <li><a href="politica.html">POL√çTICA</a></li>
    </ul>
  </nav>
</header>

<section class="reserva">
  <h1>Reserva</h1>

  <div class="card">

    <!-- GALERIA -->
    <div class="galeria-reserva">
      <img class="galeria-principal" id="galeriaPrincipal" src="assets/galeria/g1.jpg" alt="Chal√© Ful√¥ de Pequi">
      <div class="miniaturas" id="galeriaMiniaturas">
        <button class="miniatura ativa" type="button" data-img="assets/galeria/g1.jpg">
          <img src="assets/galeria/g1.jpg" alt="Vista do chal√©">
        </button>
        <button class="miniatura" type="button" data-img="assets/galeria/g2.jpg">
          <img src="assets/galeria/g2.jpg" alt="√Årea externa">
        </button>
        <button class="miniatura" type="button" data-img="assets/galeria/g3.jpg">
          <img src="assets/galeria/g3.jpg" alt="Sala integrada">
        </button>
        <button class="miniatura" type="button" data-img="assets/galeria/g4.jpg">
          <img src="assets/galeria/g4.jpg" alt="Banheira">
        </button>
        <button class="miniatura" type="button" data-img="assets/galeria/g5.jpg">
          <img src="assets/galeria/g5.jpg" alt="Detalhes do quarto">
        </button>
        <button class="miniatura" type="button" data-img="assets/galeria/g6.jpg">
          <img src="assets/galeria/g6.jpg" alt="Varanda">
        </button>
        <button class="miniatura" type="button" data-img="assets/galeria/g7.jpg">
          <img src="assets/galeria/g7.jpg" alt="Paisagem do entorno">
        </button>
        <button class="miniatura" type="button" data-img="assets/galeria/g8.jpg">
          <img src="assets/galeria/g8.jpg" alt="Ambiente interno">
        </button>
      </div>
    </div>

    <!-- CONTE√öDO / FORM -->
    <div class="form">
      <h2>Chal√© Ful√¥ de Pequi</h2>

      <!-- CHIPS (estilo Airbnb) -->
      <div class="chips">
        <span class="chip">üè° Chal√© inteiro ‚Ä¢ privativo</span>
        <span class="chip">üë§ At√© 2 h√≥spedes</span>
        <span class="chip">üîë Self check-in</span>
        <span class="chip">üöó Estacionamento gratuito</span>
      </div>

      <!-- Descri√ß√£o clara -->
      <p class="descricao">
        Um ref√∫gio em meio ao cerrado de Cavalcante ‚Äî moderno, aconchegante e integrado √† natureza.
        Ideal para casais e viajantes que buscam tranquilidade, conforto e privacidade.
      </p>

      <!-- REGRAS (descontos + fim de semana) -->
      <div class="regras-reserva">
        <strong>üí∞ Descontos autom√°ticos</strong>
        <ul>
          <li><strong>3 noites:</strong> 8% de desconto</li>
          <li><strong>4 noites ou mais:</strong> 10% de desconto</li>
        </ul>

        <strong>üìÖ Finais de semana</strong>
        <p>Reservas apenas com <strong>s√°bado + domingo juntos</strong>.</p>

        <small>* O total com desconto aparece automaticamente ao selecionar as datas.</small>
      </div>

      <label>Per√≠odo da estadia</label>
      <input type="text" id="datas" placeholder="Selecione as datas">

      <label>N√∫mero de h√≥spedes</label>
      <select id="hospedes">
        <option value="1">1 h√≥spede</option>
        <option value="2">2 h√≥spedes</option>
      </select>

      <button onclick="reservar()">Solicitar reserva</button>

      <div class="info">
        Valor da di√°ria: <strong>R$ 340,00</strong><br>
        Confirma√ß√£o via WhatsApp
        <div id="totalBox"></div>
      </div>

    </div>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>

<script>
const VALOR_DIARIA = 340;

const inputDatas = document.getElementById("datas");
const hospedesEl = document.getElementById("hospedes");
const totalBox = document.getElementById("totalBox");
const galeriaPrincipal = document.getElementById("galeriaPrincipal");
const miniaturas = document.querySelectorAll(".miniatura");

miniaturas.forEach((miniatura) => {
  miniatura.addEventListener("click", () => {
    const novaImagem = miniatura.getAttribute("data-img");
    if(!novaImagem){
      return;
    }

    galeriaPrincipal.src = novaImagem;
    miniaturas.forEach((item) => item.classList.remove("ativa"));
    miniatura.classList.add("ativa");
  });
});

function noites(inicio, fim){
  return Math.round((fim - inicio) / (1000 * 60 * 60 * 24));
}

function fimDeSemanaOk(inicio, fim){
  // se tiver s√°bado, precisa ter domingo tamb√©m (e vice-versa)
  let sab=false, dom=false;
  const d = new Date(inicio);
  while(d <= fim){
    if(d.getDay() === 6) sab = true; // s√°bado
    if(d.getDay() === 0) dom = true; // domingo
    d.setDate(d.getDate() + 1);
  }
  return !(sab ^ dom);
}

function desconto(n){
  if(n >= 4) return 0.10;
  if(n === 3) return 0.08;
  return 0;
}

function formatBR(v){
  return v.toFixed(2).replace(".", ",");
}

function atualizarResumo(selectedDates){
  if(!selectedDates || selectedDates.length < 2){
    totalBox.innerHTML = "";
    return;
  }

  const n = noites(selectedDates[0], selectedDates[1]);
  if(n <= 0){
    totalBox.innerHTML = "";
    return;
  }

  const d = desconto(n);
  const subtotal = VALOR_DIARIA * n;
  const total = subtotal * (1 - d);
  const pct = Math.round(d * 100);

  totalBox.innerHTML = `
    <div><strong>Noites:</strong> ${n}</div>
    <div><strong>Subtotal:</strong> R$ ${formatBR(subtotal)}</div>
    ${d > 0 ? `<div><strong>Desconto:</strong> ${pct}%</div>` : ``}
    <div><strong>Total:</strong> R$ ${formatBR(total)}</div>
  `;
}

flatpickr("#datas", {
  mode: "range",
  minDate: "today",
  dateFormat: "d/m/Y",
  locale: "pt",
  onClose: function(selectedDates){
    if(selectedDates.length < 2){
      atualizarResumo(selectedDates);
      return;
    }

    if(!fimDeSemanaOk(selectedDates[0], selectedDates[1])){
      alert("Nos finais de semana, a reserva deve incluir S√ÅBADO e DOMINGO juntos.");
      this.clear();
      totalBox.innerHTML = "";
      return;
    }

    atualizarResumo(selectedDates);
  },
  onChange: function(selectedDates){
    atualizarResumo(selectedDates);
  }
});

function reservar(){
  const datas = inputDatas.value;
  const hospedes = hospedesEl.value;

  if(!datas){
    alert("Selecione o per√≠odo da estadia.");
    return;
  }

  // tenta pegar as datas reais do flatpickr para calcular noites/total no WhatsApp
  const instance = inputDatas._flatpickr;
  const selected = instance ? instance.selectedDates : [];
  if(!selected || selected.length < 2){
    alert("Selecione um intervalo completo (check-in e check-out).");
    return;
  }

  if(!fimDeSemanaOk(selected[0], selected[1])){
    alert("Nos finais de semana, a reserva deve incluir S√ÅBADO e DOMINGO juntos.");
    return;
  }

  const n = noites(selected[0], selected[1]);
  const d = desconto(n);
  const subtotal = VALOR_DIARIA * n;
  const total = subtotal * (1 - d);
  const pct = Math.round(d * 100);

  const msg =
    `Ol√°! Gostaria de reservar o Chal√© Ful√¥ de Pequi.\n\n` +
    `Per√≠odo: ${datas}\n` +
    `H√≥spedes: ${hospedes}\n` +
    `Noites: ${n}\n` +
    `Di√°ria: R$ ${formatBR(VALOR_DIARIA)}\n` +
    `Subtotal: R$ ${formatBR(subtotal)}\n` +
    (d > 0 ? `Desconto: ${pct}%\nTotal com desconto: R$ ${formatBR(total)}\n\n` : `Total: R$ ${formatBR(total)}\n\n`) +
    `Pode confirmar disponibilidade e forma de pagamento?`;

  window.open(`https://wa.me/5562999350693?text=${encodeURIComponent(msg)}`, "_blank");
}
</script>

</body>
</html>
