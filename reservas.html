<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Reservas | Ful√¥ de Pequi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}
body{ background:#f3e2be; }
h1, h2, h3{
  font-family:"Playfair Display", serif;
}

/* ===== TOPO ===== */
.topo{
  height:90px;
  background:#2f3b2a;
  display:grid;
  grid-template-columns:auto 1fr;
  align-items:center;
  padding:0 40px;
}
.logo img{height:70px;display:block;}
.menu{
  list-style:none;
  display:flex;
  justify-content:center;
  gap:50px;
  margin:0;
  padding:0;
}
.menu li{
  position:relative;
}
.menu a{
  color:#fff;
  text-decoration:none;
  text-transform:uppercase;
  font-size:13px;
  font-weight:500;
  letter-spacing:2px;
  padding:10px 0;
  opacity:0.9;
}
.menu li::before{
  content:"";
  position:absolute;
  top:-12px;
  left:50%;
  width:32px;
  height:1px;
  background:rgba(255,255,255,0.5);
  transform:translateX(-50%);
}
.menu a.ativo{
  opacity:1;
}

/* ===== √ÅREA ===== */
.reserva{
  max-width:1100px;
  margin:100px auto;
  padding:0 20px;
}
.reserva h1{
  text-align:center;
  font-size:36px;
  color:#2f3b2a;
  margin-bottom:40px;
}

/* ===== CARD ===== */
.card{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:40px;
  background:#f7f7f5;
  padding:40px;
  border-radius:6px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
}

/* =========================================
   GALERIA (10 fotos)
   ========================================= */
.galeria{
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.galeria-principal{
  width:100%;
  height:100%;
  min-height:420px;
  border-radius:4px;
  overflow:hidden;
  cursor:pointer;
}
.galeria-principal img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}
.galeria-thumbs{
  display:grid;
  grid-template-columns:repeat(5, 1fr);
  gap:8px;
}
.thumb{
  border-radius:4px;
  overflow:hidden;
  border:1px solid rgba(0,0,0,0.12);
  background:#fff;
  cursor:pointer;
  aspect-ratio: 4 / 3;
}
.thumb img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}
.thumb.active{
  outline:2px solid rgba(47,59,42,0.6);
}

/* ===== COLUNA DIREITA ===== */
.form h2{
  font-size:28px;
  margin-bottom:10px;
  color:#2f3b2a;
}
.descricao{
  font-size:15px;
  color:#555;
  line-height:1.7;
  margin:10px 0 18px;
}

/* Chips */
.chips{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin:12px 0 14px;
}
.chip{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  background:#fff;
  border:1px solid rgba(0,0,0,0.12);
  border-radius:999px;
  font-size:13px;
  color:#333;
  white-space:nowrap;
}

/* Regras */
.regras-reserva{
  margin:14px 0 18px;
  padding:14px 16px;
  background:#fff;
  border:1px solid rgba(0,0,0,0.15);
  font-size:14px;
  color:#444;
  line-height:1.6;
  border-radius:6px;
}
.regras-reserva ul{ margin:8px 0 6px 18px; }
.regras-reserva li{ margin-bottom:4px; }
.regras-reserva strong{ color:#2f3b2a; }
.regras-reserva small{
  display:block;
  margin-top:8px;
  color:#666;
}

/* Form */
.form label{
  display:block;
  margin-top:14px;
  font-size:14px;
  color:#2f3b2a;
}
.form input, .form select{
  width:100%;
  padding:12px;
  margin-top:6px;
  font-size:15px;
  border:1px solid rgba(0,0,0,0.2);
  border-radius:6px;
  background:#fff;
}
.form button{
  width:100%;
  margin-top:18px;
  padding:14px;
  background:#2f3b2a;
  color:#fff;
  border:none;
  font-size:15px;
  letter-spacing:1px;
  cursor:pointer;
  text-transform:uppercase;
  border-radius:6px;
}

/* Resumo total */
.info{
  margin-top:16px;
  font-size:14px;
  color:#555;
  line-height:1.6;
}

/* ===== TotalBox estilo Airbnb (verde suave quando h√° desconto) ===== */
#totalBox{
  margin-top:14px;
  padding:16px 18px;
  background:#fff;
  border:1px solid rgba(0,0,0,0.15);
  border-radius:12px;
  font-size:15px;
  line-height:1.7;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
}

/* Linha do TOTAL em evid√™ncia */
#totalBox .linha-total{
  margin-top:10px;
  padding-top:10px;
  border-top:1px dashed rgba(0,0,0,0.20);
  font-size:20px;
  font-weight:600;
  color:#2f3b2a;
}

/* Badge de desconto */
#totalBox .badge-desconto{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  font-size:13px;
  font-weight:600;
  margin-bottom:10px;
  background:rgba(0,0,0,0.04);
  color:#333;
}

/* Estado com desconto */
#totalBox.com-desconto{
  background:#ecf7ef;
  border:1px solid rgba(34,139,34,0.35);
  box-shadow:0 8px 22px rgba(34,139,34,0.12);
}
#totalBox.com-desconto .badge-desconto{
  background:rgba(34,139,34,0.12);
  color:#1f6f2a;
}
#totalBox.com-desconto .linha-total{
  color:#1f6f2a;
}

/* ===================
   LIGHTBOX / MODAL
   =================== */
.lightbox{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.82);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
  padding:24px;
}
.lightbox.open{ display:flex; }

.lightbox-inner{
  width:min(1100px, 96vw);
  height:min(700px, 86vh);
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
}

.lightbox-img{
  width:100%;
  height:100%;
  object-fit:contain;
  border-radius:8px;
  background:rgba(255,255,255,0.02);
}

.lb-btn{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:48px;
  height:48px;
  border:none;
  border-radius:999px;
  cursor:pointer;
  background:rgba(255,255,255,0.12);
  color:#fff;
  font-size:22px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.lb-btn:hover{ background:rgba(255,255,255,0.18); }
.lb-prev{ left:10px; }
.lb-next{ right:10px; }

.lb-close{
  position:absolute;
  top:10px;
  right:10px;
  width:44px;
  height:44px;
  border:none;
  border-radius:999px;
  cursor:pointer;
  background:rgba(255,255,255,0.12);
  color:#fff;
  font-size:20px;
}
.lb-close:hover{ background:rgba(255,255,255,0.18); }

.lb-count{
  position:absolute;
  bottom:10px;
  left:10px;
  padding:8px 10px;
  border-radius:999px;
  background:rgba(255,255,255,0.12);
  color:#fff;
  font-size:13px;
}

/* Responsivo */
@media(max-width:900px){
  .card{ grid-template-columns:1fr; }
  .galeria-principal{ min-height:280px; }
  .galeria-thumbs{ grid-template-columns:repeat(5, 1fr); }
}
@media(max-width:520px){
  .galeria-thumbs{ grid-template-columns:repeat(4, 1fr); }
}
</style>
</head>

<body>

<header>
  <nav class="topo">
    <div class="logo">
      <a href="index.html">
        <img src="assets/logo.png" alt="Ful√¥ de Pequi">
      </a>
    </div>
    <ul class="menu">
      <li><a href="index.html">In√≠cio</a></li>
      <li><a href="reservas.html" class="ativo">Acomoda√ß√µes</a></li>
      <li><a href="servicos.html">Servi√ßos</a></li>
      <li><a href="politica.html">Pol√≠tica</a></li>
    </ul>
  </nav>
</header>

<section class="reserva">
  <h1>Reserva</h1>

  <div class="card">

    <!-- GALERIA -->
    <div class="galeria" id="galeria">
      <div class="galeria-principal" id="galeriaPrincipal" title="Clique para ampliar">
        <img id="imgPrincipal" src="assets/galeria/g1.jpg" alt="Chal√© Ful√¥ de Pequi">
      </div>

      <div class="galeria-thumbs" id="thumbs">
        <!-- thumbs via JS -->
      </div>
    </div>

    <!-- FORM -->
    <div class="form">
      <h2>Chal√© Ful√¥ de Pequi</h2>

      <div class="chips">
        <span class="chip">üè° Chal√© inteiro ‚Ä¢ privativo</span>
        <span class="chip">üë§ At√© 2 h√≥spedes</span>
        <span class="chip">üîë Self check-in</span>
        <span class="chip">üöó Estacionamento gratuito</span>
      </div>

      <p class="descricao">
        Um ref√∫gio em meio ao cerrado de Cavalcante ‚Äî moderno, aconchegante e integrado √† natureza.
        Ideal para casais e viajantes que buscam tranquilidade, conforto e privacidade.
      </p>

      <div class="regras-reserva">
        <strong>üí∞ Descontos autom√°ticos</strong>
        <ul>
          <li><strong>3 noites:</strong> 8% de desconto</li>
          <li><strong>4 noites ou mais:</strong> 10% de desconto</li>
        </ul>

        <strong>üìÖ Finais de semana</strong>
        <p>Reservas apenas com <strong>s√°bado + domingo juntos</strong>.</p>

        <small>* O total com desconto aparece automaticamente ao selecionar as datas.</small>
      </div>

      <label>Per√≠odo da estadia</label>
      <input type="text" id="datas" placeholder="Selecione as datas">

      <label>N√∫mero de h√≥spedes</label>
      <select id="hospedes">
        <option value="1">1 h√≥spede</option>
        <option value="2">2 h√≥spedes</option>
      </select>

      <button onclick="reservar()">Solicitar reserva</button>

      <div class="info">
        Valor da di√°ria: <strong>R$ 340,00</strong><br>
        Confirma√ß√£o via WhatsApp
        <div id="totalBox"></div>
      </div>

    </div>
  </div>
</section>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox" aria-hidden="true">
  <div class="lightbox-inner" role="dialog" aria-modal="true" aria-label="Galeria de fotos">
    <button class="lb-close" id="lbClose" aria-label="Fechar">‚úï</button>
    <button class="lb-btn lb-prev" id="lbPrev" aria-label="Foto anterior">‚Äπ</button>
    <img class="lightbox-img" id="lbImg" alt="Foto ampliada do Chal√©">
    <button class="lb-btn lb-next" id="lbNext" aria-label="Pr√≥xima foto">‚Ä∫</button>
    <div class="lb-count" id="lbCount"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>

<script>
/* =========================
   GALERIA (10 fotos)
   ========================= */
const fotos = [
  "assets/galeria/g1.jpg",
  "assets/galeria/g2.jpg",
  "assets/galeria/g3.jpg",
  "assets/galeria/g4.jpg",
  "assets/galeria/g5.jpg",
  "assets/galeria/g6.jpg",
  "assets/galeria/g7.jpg",
  "assets/galeria/g8.jpg",
  "assets/galeria/g9.jpg",
  "assets/galeria/g10.jpg"
];

let fotoAtual = 0;

const imgPrincipal = document.getElementById("imgPrincipal");
const thumbs = document.getElementById("thumbs");
const galeriaPrincipal = document.getElementById("galeriaPrincipal");

function montarThumbs(){
  thumbs.innerHTML = "";
  fotos.forEach((src, idx) => {
    const t = document.createElement("div");
    t.className = "thumb" + (idx === fotoAtual ? " active" : "");
    t.innerHTML = `<img src="${src}" alt="Foto ${idx+1} do Chal√©">`;
    t.addEventListener("click", () => {
      setFoto(idx);
      abrirLightbox(idx);
    });
    thumbs.appendChild(t);
  });
}

function setFoto(idx){
  fotoAtual = idx;
  imgPrincipal.src = fotos[idx];
  [...thumbs.children].forEach((el, i) => {
    el.classList.toggle("active", i === idx);
  });
}

galeriaPrincipal.addEventListener("click", () => abrirLightbox(fotoAtual));

/* Lightbox */
const lightbox = document.getElementById("lightbox");
const lbImg = document.getElementById("lbImg");
const lbPrev = document.getElementById("lbPrev");
const lbNext = document.getElementById("lbNext");
const lbClose = document.getElementById("lbClose");
const lbCount = document.getElementById("lbCount");

function abrirLightbox(idx){
  fotoAtual = idx;
  lbImg.src = fotos[fotoAtual];
  lbCount.textContent = `${fotoAtual + 1} / ${fotos.length}`;
  lightbox.classList.add("open");
  lightbox.setAttribute("aria-hidden", "false");
}

function fecharLightbox(){
  lightbox.classList.remove("open");
  lightbox.setAttribute("aria-hidden", "true");
}

function prevFoto(){
  fotoAtual = (fotoAtual - 1 + fotos.length) % fotos.length;
  lbImg.src = fotos[fotoAtual];
  lbCount.textContent = `${fotoAtual + 1} / ${fotos.length}`;
  setFoto(fotoAtual);
}

function nextFoto(){
  fotoAtual = (fotoAtual + 1) % fotos.length;
  lbImg.src = fotos[fotoAtual];
  lbCount.textContent = `${fotoAtual + 1} / ${fotos.length}`;
  setFoto(fotoAtual);
}

lbPrev.addEventListener("click", (e) => { e.stopPropagation(); prevFoto(); });
lbNext.addEventListener("click", (e) => { e.stopPropagation(); nextFoto(); });
lbClose.addEventListener("click", (e) => { e.stopPropagation(); fecharLightbox(); });

// clicar fora fecha
lightbox.addEventListener("click", (e) => {
  if(e.target === lightbox) fecharLightbox();
});

// teclado
document.addEventListener("keydown", (e) => {
  if(!lightbox.classList.contains("open")) return;
  if(e.key === "Escape") fecharLightbox();
  if(e.key === "ArrowLeft") prevFoto();
  if(e.key === "ArrowRight") nextFoto();
});

// inicia galeria
montarThumbs();
setFoto(0);

/* =========================
   RESERVA / C√ÅLCULO
   ========================= */
const VALOR_DIARIA = 340;

const inputDatas = document.getElementById("datas");
const hospedesEl = document.getElementById("hospedes");
const totalBox = document.getElementById("totalBox");

function noites(inicio, fim){
  return Math.round((fim - inicio) / (1000 * 60 * 60 * 24));
}

function fimDeSemanaOk(inicio, fim){
  let sab=false, dom=false;
  const d = new Date(inicio);
  while(d <= fim){
    if(d.getDay() === 6) sab = true;
    if(d.getDay() === 0) dom = true;
    d.setDate(d.getDate() + 1);
  }
  return !(sab ^ dom);
}

function desconto(n){
  if(n >= 4) return 0.10;
  if(n === 3) return 0.08;
  return 0;
}

function formatBR(v){
  return v.toFixed(2).replace(".", ",");
}

/* ===== RESUMO COM ESTILO AIRBNB (verde quando h√° desconto) ===== */
function atualizarResumo(selectedDates){
  if(!selectedDates || selectedDates.length < 2){
    totalBox.innerHTML = "";
    totalBox.classList.remove("com-desconto");
    return;
  }

  const n = noites(selectedDates[0], selectedDates[1]);
  if(n <= 0){
    totalBox.innerHTML = "";
    totalBox.classList.remove("com-desconto");
    return;
  }

  const d = desconto(n);
  const subtotal = VALOR_DIARIA * n;
  const total = subtotal * (1 - d);
  const pct = Math.round(d * 100);

  if(d > 0) totalBox.classList.add("com-desconto");
  else totalBox.classList.remove("com-desconto");

  totalBox.innerHTML = `
    ${d > 0 ? `<div class="badge-desconto">üíö Desconto aplicado ‚Ä¢ ${pct}%</div>` : ``}
    <div><strong>Noites:</strong> ${n}</div>
    <div><strong>Subtotal:</strong> R$ ${formatBR(subtotal)}</div>
    ${d > 0 ? `<div><strong>Desconto:</strong> ${pct}%</div>` : ``}
    <div class="linha-total"><strong>Total:</strong> R$ ${formatBR(total)}</div>
  `;
}

flatpickr("#datas", {
  mode: "range",
  minDate: "today",
  dateFormat: "d/m/Y",
  locale: "pt",
  onClose: function(selectedDates){
    if(selectedDates.length < 2){
      atualizarResumo(selectedDates);
      return;
    }

    if(!fimDeSemanaOk(selectedDates[0], selectedDates[1])){
      alert("Nos finais de semana, a reserva deve incluir S√ÅBADO e DOMINGO juntos.");
      this.clear();
      totalBox.innerHTML = "";
      totalBox.classList.remove("com-desconto");
      return;
    }

    atualizarResumo(selectedDates);
  },
  onChange: function(selectedDates){
    atualizarResumo(selectedDates);
  }
});

function reservar(){
  const datas = inputDatas.value;
  const hospedes = hospedesEl.value;

  if(!datas){
    alert("Selecione o per√≠odo da estadia.");
    return;
  }

  const instance = inputDatas._flatpickr;
  const selected = instance ? instance.selectedDates : [];
  if(!selected || selected.length < 2){
    alert("Selecione um intervalo completo (check-in e check-out).");
    return;
  }

  if(!fimDeSemanaOk(selected[0], selected[1])){
    alert("Nos finais de semana, a reserva deve incluir S√ÅBADO e DOMINGO juntos.");
    return;
  }

  const n = noites(selected[0], selected[1]);
  const d = desconto(n);
  const subtotal = VALOR_DIARIA * n;
  const total = subtotal * (1 - d);
  const pct = Math.round(d * 100);

  // mant√©m o destaque coerente caso o usu√°rio clique r√°pido
  if(d > 0) totalBox.classList.add("com-desconto");
  else totalBox.classList.remove("com-desconto");

  const msg =
    `Ol√°! Gostaria de reservar o Chal√© Ful√¥ de Pequi.\n\n` +
    `Per√≠odo: ${datas}\n` +
    `H√≥spedes: ${hospedes}\n` +
    `Noites: ${n}\n` +
    `Di√°ria: R$ ${formatBR(VALOR_DIARIA)}\n` +
    `Subtotal: R$ ${formatBR(subtotal)}\n` +
    (d > 0 ? `Desconto: ${pct}%\nTotal com desconto: R$ ${formatBR(total)}\n\n` : `Total: R$ ${formatBR(total)}\n\n`) +
    `Pode confirmar disponibilidade e forma de pagamento?`;

  window.open(`https://wa.me/5562999350693?text=${encodeURIComponent(msg)}`, "_blank");
}
</script>

</body>
</html>
