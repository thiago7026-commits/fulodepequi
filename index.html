<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fulô de Pequi • Chalé em Cavalcante</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --verde:#2f3b2a;
      --dourado:#c9a24d;
      --fundo:#fafafa;
      --texto:#2a2a2a;
      --muted:#6c6c6c;
      --card:#ffffff;
      --borda:rgba(0,0,0,0.08);
      --shadow:0 12px 30px rgba(0,0,0,0.10);
      --radius:16px;
      --max:1120px;
    }

    *{ margin:0; padding:0; box-sizing:border-box; font-family:"Poppins", sans-serif; }
    html,body{ width:100%; overflow-x:hidden; background:var(--fundo); color:var(--texto); }
    a{ color:inherit; text-decoration:none; }
    h1,h2,h3{ font-family:"Playfair Display", serif; }
    img{ max-width:100%; display:block; }

    /* ================= HEADER ================= */
    header{
      position:sticky;
      top:0;
      z-index:50;
      height:90px;
      background:var(--verde);
      display:flex;
      align-items:center;
      justify-content:center;
      border-bottom:1px solid rgba(255,255,255,0.08);
    }
    .topo{
      width:min(var(--max), 92vw);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:18px;
    }
    .logo{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:200px;
    }
    .logo img{ height:64px; width:auto; }
    nav ul{
      list-style:none;
      display:flex;
      gap:28px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
    }
    nav a{
      color:#fff;
      text-transform:uppercase;
      font-size:13px;
      letter-spacing:1px;
      font-weight:500;
      opacity:0.95;
      padding:8px 6px;
    }
    nav a:hover{ opacity:1; }

    /* Botão reserva (fora do menu) */
    .cta-topo{
      display:flex;
      align-items:center;
      gap:10px;
      justify-content:flex-end;
      min-width:200px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius:999px;
      padding:12px 18px;
      font-size:13px;
      font-weight:600;
      letter-spacing:0.7px;
      text-transform:uppercase;
      border:1px solid transparent;
      cursor:pointer;
      transition:transform .15s ease, opacity .15s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btn:active{ transform:scale(0.98); }
    .btn-dourado{ background:var(--dourado); color:#fff; }
    .btn-outline{
      background:transparent;
      border-color:rgba(255,255,255,0.22);
      color:#fff;
      opacity:0.95;
    }

    /* ================= HERO (TOPO - 10 FOTOS) ================= */
    .hero{
      position:relative;
      height:76vh;
      min-height:520px;
      overflow:hidden;
      background:#111;
    }
    .hero-track{
      height:100%;
      display:flex;
      overflow-x:auto;
      scroll-snap-type:x mandatory;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
    }
    .hero-track::-webkit-scrollbar{ display:none; }
    .hero-slide{
      width:100%;
      min-width:100%;
      height:100%;
      scroll-snap-align:start;
      position:relative;
    }
    .hero-slide img{
      width:100%;
      height:100%;
      object-fit:cover;
      filter:saturate(1.02) contrast(1.02);
    }
    .hero-gradient{
      position:absolute;
      inset:0;
      background:
        linear-gradient(180deg, rgba(0,0,0,0.42) 0%, rgba(0,0,0,0.18) 40%, rgba(0,0,0,0.55) 100%);
      pointer-events:none;
    }
    .hero-content{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:20px;
    }
    .hero-box{
      width:min(820px, 92vw);
      color:#fff;
    }
    .hero-box h1{
      font-size:46px;
      line-height:1.05;
      margin-bottom:10px;
    }
    .hero-box p{
      font-size:16px;
      line-height:1.7;
      opacity:0.95;
      margin:0 auto 22px;
      max-width:640px;
    }
    .hero-actions{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
    }

    /* Indicadores do hero */
    .hero-dots{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:18px;
      display:flex;
      gap:10px;
      padding:12px 14px;
      border-radius:999px;
      background:rgba(0,0,0,0.35);
      backdrop-filter: blur(8px);
    }
    .dot{
      width:12px; height:12px;
      border-radius:999px;
      background:rgba(255,255,255,0.45);
      border:1px solid rgba(255,255,255,0.10);
      cursor:pointer;
    }
    .dot.active{ background:#fff; }

    /* ================= SEÇÕES (BASE) ================= */
    .wrap{ width:min(var(--max), 92vw); margin:0 auto; }
    .section{ padding:72px 0; }
    .section h2{
      font-size:36px;
      text-align:center;
      margin-bottom:18px;
    }
    .section .sub{
      text-align:center;
      color:var(--muted);
      max-width:860px;
      margin:0 auto 40px;
      line-height:1.8;
      font-size:16px;
    }

    /* ================= BLOCO “BOTÕES” ================= */
    .quick-actions{
      display:flex;
      gap:14px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:18px;
    }
    .qa{
      background:var(--card);
      border:1px solid var(--borda);
      border-radius:999px;
      padding:12px 18px;
      box-shadow:0 10px 20px rgba(0,0,0,0.06);
      font-weight:600;
      font-size:13px;
      text-transform:uppercase;
      letter-spacing:0.7px;
      cursor:pointer;
      transition:transform .15s ease;
    }
    .qa:hover{ transform:translateY(-1px); }

    /* ================= SUBSTITUTO PROFISSIONAL DO “BANNER” ================= */
    .highlights{
      margin-top:26px;
      background:linear-gradient(180deg, rgba(201,162,77,0.14) 0%, rgba(255,255,255,0.0) 100%);
      border:1px solid rgba(201,162,77,0.30);
      border-radius:24px;
      padding:26px;
      box-shadow:0 14px 34px rgba(0,0,0,0.06);
    }
    .highlights-grid{
      display:grid;
      grid-template-columns:1.2fr 1fr;
      gap:18px;
      align-items:stretch;
    }
    .high-left{
      background:#fff;
      border-radius:20px;
      border:1px solid var(--borda);
      padding:22px;
    }
    .high-left h3{ font-size:22px; margin-bottom:10px; }
    .high-left p{ color:var(--muted); line-height:1.8; margin-bottom:16px; }
    .high-left .mini-actions{ display:flex; gap:10px; flex-wrap:wrap; }
    .high-right{ display:grid; gap:12px; }
    .pill{
      background:#fff;
      border:1px solid var(--borda);
      border-radius:18px;
      padding:16px 16px;
      display:flex;
      gap:12px;
      align-items:flex-start;
    }
    .pill b{ display:block; }
    .pill span{ display:block; color:var(--muted); line-height:1.6; font-size:14px; }
    .icon{
      width:42px; height:42px;
      border-radius:14px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(47,59,42,0.10);
      border:1px solid rgba(47,59,42,0.10);
      flex:0 0 42px;
      font-weight:800;
      color:var(--verde);
    }

    /* ================= CACHOEIRAS ================= */
    .cachoeiras-grid{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap:22px;
    }
    .cach-card{
      background:var(--card);
      border:1px solid var(--borda);
      border-radius:24px;
      overflow:hidden;
      box-shadow:var(--shadow);
      transition:transform .18s ease;
    }
    .cach-card:hover{ transform:translateY(-2px); }
    .cach-card .img{
      height:340px; /* referência: tamanho das cachoeiras */
      background:#ddd;
      overflow:hidden;
    }
    .cach-card .img img{
      width:100%;
      height:100%;
      object-fit:cover;
      transform:scale(1.02);
    }
    .cach-card .txt{ padding:18px 18px 20px; }
    .cach-card h3{ font-size:20px; margin-bottom:8px; }
    .cach-card p{ color:var(--muted); line-height:1.75; font-size:14.5px; }

    /* ================= MAPA / LOCALIZAÇÃO ================= */
    .mapa-wrap{
      display:grid;
      grid-template-columns:1fr 1.2fr;
      gap:22px;
      align-items:stretch;
    }
    .mapa-card{
      background:var(--card);
      border:1px solid var(--borda);
      border-radius:24px;
      padding:22px;
      box-shadow:0 14px 30px rgba(0,0,0,0.08);
    }
    .mapa-card h3{ font-size:22px; margin-bottom:10px; }
    .mapa-card p{ color:var(--muted); line-height:1.8; margin-bottom:14px; }
    .mapa-embed{
      background:var(--card);
      border:1px solid var(--borda);
      border-radius:24px;
      overflow:hidden;
      box-shadow:0 14px 30px rgba(0,0,0,0.08);
      min-height:380px;
    }
    .mapa-embed iframe{
      width:100%;
      height:100%;
      border:0;
      min-height:380px;
    }

    /* ================= CARROSSEL REDONDINHO (AGORA DO TAMANHO DAS CACHOEIRAS) ================= */
    .thumb-carousel{
      background:#f2f2f2;
      padding:110px 0 120px; /* ⬅️ mais presença */
      border-top:1px solid rgba(0,0,0,0.05);
      border-bottom:1px solid rgba(0,0,0,0.05);
    }
    .thumb-track{
      display:flex;
      gap:26px;            /* ⬅️ mais espaço entre bolas grandes */
      overflow-x:auto;
      padding:30px 10px;   /* ⬅️ mais respiro vertical */
      scroll-snap-type:x mandatory;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
    }
    .thumb-track::-webkit-scrollbar{ display:none; }

    .thumb{
      flex:0 0 auto;
      width:320px;          /* ⬅️ grande (próximo de 340px das cachoeiras) */
      height:320px;         /* ⬅️ grande */
      border-radius:999px;
      overflow:hidden;
      border:6px solid rgba(255,255,255,0.95);
      box-shadow:0 22px 46px rgba(0,0,0,0.20);
      scroll-snap-align:start;
      cursor:pointer;
      background:#ddd;
      transition:transform .25s ease;
    }
    .thumb:hover{ transform:scale(1.03); }

    .thumb img{
      width:100%;
      height:100%;
      object-fit:cover;
    }
    .thumb-title{
      text-align:center;
      color:var(--muted);
      font-size:16px;
      margin-top:14px;
      font-weight:600;
      letter-spacing:0.2px;
    }

    /* ================= LIGHTBOX ================= */
    .lightbox{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.78);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:200;
      padding:18px;
    }
    .lightbox.open{ display:flex; }
    .lightbox-inner{
      width:min(980px, 94vw);
      border-radius:18px;
      overflow:hidden;
      background:#111;
      box-shadow:0 24px 60px rgba(0,0,0,0.55);
      position:relative;
    }
    .lightbox-inner img{
      width:100%;
      height:min(82vh, 720px);
      object-fit:contain;
      background:#111;
    }
    .lb-close{
      position:absolute;
      top:10px;
      right:10px;
      background:rgba(255,255,255,0.12);
      border:1px solid rgba(255,255,255,0.22);
      color:#fff;
      border-radius:999px;
      padding:10px 12px;
      cursor:pointer;
      font-weight:700;
    }

    /* ================= WHATSAPP FLUTUANTE ================= */
    .whats{
      position:fixed;
      right:18px;
      bottom:18px;
      z-index:120;
      display:flex;
      align-items:center;
      gap:10px;
      background:#25D366;
      color:#fff;
      padding:12px 14px;
      border-radius:999px;
      box-shadow:0 18px 34px rgba(0,0,0,0.20);
      font-weight:700;
      letter-spacing:0.4px;
    }
    .whats span{ font-size:14px; }

    /* ================= FOOTER ================= */
    footer{
      background:var(--verde);
      color:#fff;
      padding:44px 0;
      text-align:center;
      margin-top:0;
    }
    footer p{
      opacity:0.92;
      font-size:14px;
      line-height:1.8;
      width:min(var(--max), 92vw);
      margin:0 auto;
    }

    /* ================= RESPONSIVO ================= */
    @media (max-width: 980px){
      .highlights-grid{ grid-template-columns:1fr; }
      .cachoeiras-grid{ grid-template-columns:1fr; }
      .mapa-wrap{ grid-template-columns:1fr; }
      .hero{ min-height:520px; height:72vh; }
      .hero-box h1{ font-size:36px; }
      header{ height:auto; padding:14px 0; }
      .topo{ flex-direction:column; align-items:center; }
      .logo, .cta-topo{ min-width:auto; }
      nav ul{ justify-content:center; }
    }
    @media (max-width: 520px){
      .hero{ min-height:540px; }
      .hero-box h1{ font-size:30px; }
      .hero-box p{ font-size:15px; }

      /* ⬅️ mobile: grande, mas usável */
      .thumb{
        width:190px;
        height:190px;
        border-width:5px;
      }
      .thumb-track{
        gap:18px;
        padding:22px 8px;
      }
      .thumb-carousel{
        padding:80px 0 90px;
      }

      .dot{ width:10px; height:10px; }
    }
    @media (min-width: 981px){
      .hero{ height:68vh; min-height:480px; }
      .hero-slide img{ object-position:center 20%; }
    }
  </style>
</head>

<body>

  <!-- HEADER -->
  <header>
    <div class="topo">
      <div class="logo">
        <a href="index.html" aria-label="Fulô de Pequi">
          <img src="assets/logo.png" alt="Fulô de Pequi">
        </a>
      </div>

      <nav aria-label="Menu principal">
        <ul>
          <li><a href="index.html">Início</a></li>
          <li><a href="https://fulodepequi.com.br/reservas.html">Acomodações</a></li>
          <li><a href="servicos.html">Serviços</a></li>
          <li><a href="politica.html">Políticas</a></li>
        </ul>
      </nav>

      <div class="cta-topo">
        <a class="btn btn-outline" href="#mapa">Localização</a>
        <a class="btn btn-dourado" href="reservas.html">Reservar</a>
      </div>
    </div>
  </header>

  <!-- HERO (TOPO) - 10 FOTOS -->
  <section class="hero" aria-label="Galeria principal">
    <div class="hero-track" id="heroTrack"></div>
    <div class="hero-gradient"></div>

    <div class="hero-content">
      <div class="hero-box">
        <h1>Chalé Fulô de Pequi</h1>
        <p>
          Conforto, natureza e exclusividade em Cavalcante – Chapada dos Veadeiros.
          Arraste para o lado e veja mais fotos.
        </p>
        <div class="hero-actions">
          <a class="btn btn-dourado" href="reservas.html">Reservar agora</a>
          <a class="btn btn-outline" href="https://fulodepequi.com.br/reservas.html">Ver acomodações</a>
        </div>
      </div>
    </div>

    <div class="hero-dots" id="heroDots" aria-label="Indicadores do carrossel"></div>
  </section>

  <!-- APRESENTAÇÃO + BOTÕES -->
  <section class="section">
    <div class="wrap">
      <h2>Viva a Chapada com exclusividade</h2>
      <p class="sub">
        O Fulô de Pequi é um refúgio para casais que buscam tranquilidade, paisagens marcantes e uma experiência bem cuidada do início ao fim.
      </p>

      <div class="quick-actions" aria-label="Atalhos">
        <a class="qa" href="https://fulodepequi.com.br/reservas.html">Acomodações</a>
        <a class="qa" href="servicos.html">Serviços</a>
        <a class="qa" href="politica.html">Políticas</a>
      </div>

      <div class="highlights" aria-label="Destaques profissionais">
        <div class="highlights-grid">
          <div class="high-left">
            <h3>Uma experiência completa, sem complicação</h3>
            <p>
              Em vez de um “banner” que bagunça o layout, esta área funciona como um bloco elegante de destaque:
              reforça valor, orienta o cliente e melhora conversão sem pesar o site.
            </p>
            <div class="mini-actions">
              <a class="btn btn-dourado" href="reservas.html">Fazer reserva</a>
              <a class="btn btn-outline" style="color:var(--verde); border-color:rgba(47,59,42,0.20); background:#fff;" href="servicos.html">Ver extras</a>
            </div>
          </div>

          <div class="high-right">
            <div class="pill">
              <div class="icon">✓</div>
              <div>
                <b>Check-in e Check-out claros</b>
                <span>Check-in a partir das 16h e check-out até 12h (ver detalhes em Políticas).</span>
              </div>
            </div>
            <div class="pill">
              <div class="icon">★</div>
              <div>
                <b>Indicado para casais</b>
                <span>Ambiente pensado para descanso e privacidade. Regras e condições na página Políticas.</span>
              </div>
            </div>
            <div class="pill">
              <div class="icon">↗</div>
              <div>
                <b>Localização estratégica</b>
                <span>Fácil acesso para explorar cachoeiras e pontos especiais da região.</span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <!-- CACHOEIRAS -->
  <section class="section" aria-label="Cachoeiras">
    <div class="wrap">
      <h2>Cachoeiras da região</h2>
      <p class="sub">
        Você pediu para não ficar “pequeno lado a lado”. Aqui elas ficam maiores, com cards premium e imagens grandes.
      </p>

      <div class="cachoeiras-grid">
        <article class="cach-card">
          <div class="img">
            <img data-cachoeira="0" src="assets/cachoeiras/santa-barbara.jpg" alt="Cachoeira Santa Bárbara">
          </div>
          <div class="txt">
            <h3>Cachoeira Santa Bárbara</h3>
            <p>Águas cristalinas e um cenário impressionante, um dos destaques mais desejados da Chapada.</p>
          </div>
        </article>

        <article class="cach-card">
          <div class="img">
            <img data-cachoeira="1" src="assets/cachoeiras/canjica.jpg" alt="Cachoeira Canjica">
          </div>
          <div class="txt">
            <h3>Cachoeira Canjica</h3>
            <p>Uma opção excelente para quem quer natureza e trilha com visual marcante e boas fotos.</p>
          </div>
        </article>

        <article class="cach-card">
          <div class="img">
            <img data-cachoeira="2" src="assets/cachoeiras/guardiao.jpg" alt="Cachoeira Guardião">
          </div>
          <div class="txt">
            <h3>Cachoeira Guardião</h3>
            <p>Localizada no Tocantins, mas com acesso por Cavalcante — perfeita para incluir no roteiro.</p>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- CARROSSEL REDONDINHO (GRANDE) -->
  <section class="thumb-carousel" aria-label="Galeria complementar">
    <div class="wrap">
      <h2>Mais fotos do chalé</h2>
      <p class="sub">Carrossel redondinho com 10 fotos (arraste para o lado). Toque em uma foto para ampliar.</p>

      <div class="thumb-track" id="thumbTrack"></div>

      <div class="thumb-title">Arraste para o lado</div>
    </div>
  </section>

  <!-- MAPA -->
  <section class="section" id="mapa" aria-label="Localização">
    <div class="wrap">
      <h2>Localização do chalé</h2>
      <p class="sub">
        Endereço: <b>R. 241, Qd 01 - Lt 06 - Vila Morro Encantado, Cavalcante - GO, 73790-000</b>
      </p>

      <div class="mapa-wrap">
        <div class="mapa-card">
          <h3>Como chegar</h3>
          <p>
            Use o mapa ao lado para traçar a rota. Assim que a reserva for concluída, a localização também poderá ser enviada por WhatsApp e e-mail (configuração feita na página de reservas).
          </p>
          <p style="color:var(--muted);">
            Dica: se você quiser, podemos trocar este embed por um ponto exato (lat/long) quando você confirmar a posição final.
          </p>
          <a class="btn btn-dourado" href="reservas.html">Ir para reservas</a>
        </div>

        <div class="mapa-embed">
          <iframe
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps?q=R.%20241,%20Qd%2001%20-%20Lt%2006%20-%20Vila%20Morro%20Encantado,%20Cavalcante%20-%20GO,%2073790-000&output=embed">
          </iframe>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>
      © Fulô de Pequi • Cavalcante – GO • Chapada dos Veadeiros<br/>
      Reservas e informações: WhatsApp
    </p>
  </footer>

  <!-- WhatsApp flutuante -->
  <a class="whats" href="https://wa.me/55SEUNUMEROAQUI" target="_blank" rel="noopener">
    <span>WhatsApp</span>
  </a>

  <!-- LIGHTBOX -->
  <div class="lightbox" id="lightbox" aria-label="Visualizador de imagem">
    <div class="lightbox-inner">
      <button class="lb-close" id="lbClose" aria-label="Fechar">X</button>
      <img id="lbImg" alt="Imagem ampliada">
    </div>
  </div>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbzZCgaa35xExbHyGGvlOobsM2ARy9jwYYmYgBWVB3ZimueqxESZPtLeOljzbNweZ9iU/exec";

    const HERO_FALLBACK_MOBILE = [
      "assets/bloco-1/hero-1.jpg","assets/bloco-1/hero-2.jpg","assets/bloco-1/hero-3.jpg",
      "assets/bloco-1/hero-4.jpg","assets/bloco-1/hero-5.jpg","assets/bloco-1/hero-6.jpg",
      "assets/bloco-1/hero-7.jpg","assets/bloco-1/hero-8.jpg","assets/bloco-1/hero-9.jpg",
      "assets/bloco-1/hero-10.jpg",
    ];

    const HERO_FALLBACK_DESKTOP = [
      "assets/img-para-pc/img-para-pc_1.jpg.jpg",
      "assets/img-para-pc/img-para-pc_2.jpg.jpg",
      "assets/img-para-pc/img-para-pc_3.jpg.jpg",
      "assets/img-para-pc/img-para-pc_4.jpg.jpg",
      "assets/img-para-pc/img-para-pc_5.jpg.jpg",
      "assets/img-para-pc/img-para-pc_6.jpg.jpg",
      "assets/img-para-pc/img-para-pc_7.jpg.jpg",
      "assets/img-para-pc/img-para-pc_8.jpg.jpg",
      "assets/img-para-pc/img-para-pc_9.jpg.jpg",
      "assets/img-para-pc/img-para-pc_1.jpg.jpg",
    ];

    const CACHOEIRAS_FALLBACK = [
      "assets/cachoeiras/santa-barbara.jpg",
      "assets/cachoeiras/canjica.jpg",
      "assets/cachoeiras/guardiao.jpg",
    ];

    const THUMB_FALLBACK_MOBILE = HERO_FALLBACK_MOBILE;
    const THUMB_FALLBACK_DESKTOP = HERO_FALLBACK_DESKTOP;

    const HERO_QTD = 10;
    const THUMB_QTD = 10;

    const heroTrack = document.getElementById("heroTrack");
    const heroDots  = document.getElementById("heroDots");
    const thumbTrack = document.getElementById("thumbTrack");

    const lightbox = document.getElementById("lightbox");
    const lbImg = document.getElementById("lbImg");
    const lbClose = document.getElementById("lbClose");

    async function carregarGaleria(){
      const fallback = { bloco1: [], bloco2: [], bloco3: [] };

      try{
        const body = new URLSearchParams();
        body.set("action", "getGaleria");
        body.set("payload", JSON.stringify({}));

        const res = await fetch(API_URL, { method: "POST", body, cache:"no-store" });
        const text = await res.text();
        let json = null;
        try { json = JSON.parse(text); } catch (e) {}

        if (!json || !json.ok || !json.data) return fallback;

        return {
          bloco1: Array.isArray(json.data.bloco1) ? json.data.bloco1 : [],
          bloco2: Array.isArray(json.data.bloco2) ? json.data.bloco2 : [],
          bloco3: Array.isArray(json.data.bloco3) ? json.data.bloco3 : [],
        };
      }catch(e){
        return fallback;
      }
    }

    function buildHero(images){
      heroTrack.innerHTML = "";
      heroDots.innerHTML = "";

      const imgs = images.slice(0, HERO_QTD);

      imgs.forEach((src, idx) => {
        const slide = document.createElement("div");
        slide.className = "hero-slide";
        slide.innerHTML = `<img src="${src}" alt="Foto ${idx+1} do chalé">`;
        heroTrack.appendChild(slide);

        const d = document.createElement("div");
        d.className = "dot" + (idx === 0 ? " active" : "");
        d.addEventListener("click", () => {
          heroTrack.scrollTo({ left: idx * heroTrack.clientWidth, behavior: "smooth" });
        });
        heroDots.appendChild(d);
      });

      heroTrack.addEventListener("scroll", () => {
        const idx = Math.round(heroTrack.scrollLeft / heroTrack.clientWidth);
        [...heroDots.children].forEach((dot, i) => {
          dot.classList.toggle("active", i === idx);
        });
      }, { passive:true });
    }

    function buildThumbs(images){
      thumbTrack.innerHTML = "";
      const imgs = images.slice(0, THUMB_QTD);

      imgs.forEach((src, idx) => {
        const t = document.createElement("div");
        t.className = "thumb";
        t.innerHTML = `<img src="${src}" alt="Miniatura ${idx+1}">`;
        t.addEventListener("click", () => openLightbox(src));
        thumbTrack.appendChild(t);
      });
    }

    function openLightbox(src){
      lbImg.src = src;
      lightbox.classList.add("open");
    }
    function closeLightbox(){
      lightbox.classList.remove("open");
      lbImg.src = "";
    }

    lbClose.addEventListener("click", closeLightbox);
    lightbox.addEventListener("click", (e) => { if (e.target === lightbox) closeLightbox(); });
    window.addEventListener("keydown", (e) => { if (e.key === "Escape") closeLightbox(); });

    const desktopMedia = window.matchMedia("(min-width: 981px)");
    let galeriaCache = { bloco1: [], bloco2: [], bloco3: [] };

    function renderGaleria({ bloco1, bloco2, bloco3 }, isDesktop){
      const heroFallback = isDesktop ? HERO_FALLBACK_DESKTOP : HERO_FALLBACK_MOBILE;
      const thumbFallback = isDesktop ? THUMB_FALLBACK_DESKTOP : THUMB_FALLBACK_MOBILE;

      const heroBase   = bloco1.length ? bloco1 : heroFallback;
      const thumbsBase = bloco3.length ? bloco3 : thumbFallback;
      const cachBase   = bloco2.length ? bloco2 : CACHOEIRAS_FALLBACK;

      const heroSafe  = heroBase.length  >= HERO_QTD  ? heroBase  : [...heroBase,  ...heroFallback].slice(0, HERO_QTD);
      const thumbSafe = thumbsBase.length >= THUMB_QTD ? thumbsBase : [...thumbsBase, ...thumbFallback].slice(0, THUMB_QTD);

      buildHero(heroSafe);
      buildThumbs(thumbSafe);

      document.querySelectorAll("[data-cachoeira]").forEach((img) => {
        const idx = Number(img.dataset.cachoeira || 0);
        if (cachBase[idx]) img.src = cachBase[idx];
      });
    }

    (async function init(){
      galeriaCache = await carregarGaleria();
      renderGaleria(galeriaCache, desktopMedia.matches);
    })();

    desktopMedia.addEventListener("change", (event) => {
      renderGaleria(galeriaCache, event.matches);
    });
  </script>

</body>
</html>
